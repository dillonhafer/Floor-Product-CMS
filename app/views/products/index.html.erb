<h3 class="subheader">Products</h3>
<hr />

<%= link_to_icon 'plus-sign icon-white', "New Product", new_product_path, class: 'small green button radius' %>

<h4><%= @products.count %> Products</h4>

<%= form_for :search, url: product_search_path, id: "productSearchForm" do |f| %>    
  <div class='row'>
    <div class='twelve columns'>
      <%= field_set_tag do %>
        <%= f.grouped_collection_select(:product_family_id, ProductCategory.order(:name), :product_families, :name, :id, :name) %>
        <%= submit_tag 'search', class: "small blue button nice round" %> 
        <%= link_to "advanced", '', :class => 'white round button nice radius small', :id => 'advancedSearch' %>        
      <% end %>
    </div>  
  </div>
<% end %>

<div class="pagination-container">
  <%= will_paginate(@products,:renderer => PaginationListLinkRenderer, :previous_label => "«", :next_label => "»" ) %>
</div>

<h4><%= @family_name %></h4>
<table>
  <thead>
    <tr>
      <th>Family</th><th>SKU</th><th colspan="2">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |p| %>
    <tr class="product-row">
      <td><%= p.product_family.name if p.product_family %></td><td><%= p.sku %></td><td><%= link_to_icon 'edit icon-white', 'Edit', edit_product_path(p), class: 'small blue button radius' %> <%= link_to_icon 'trash icon-white', 'Delete', product_path(p), method: :delete, data: {confirm: '1'}, class: 'small red button nice radius' %></td><td><a class="product-details-link" href="javascript:void(0)"><i class="icon icon-info-sign"></i></a></td>
    </tr>
    <tr class='hide product-details'>
      <td colspan='4'>
        <ul class='large-block-grid-4 small-block-grid-1'>
          <li>Length: <%= p.length %></li>
          <li>Width: <%= p.width %></li>
          <li>Thickness: <%= p.thickness %></li>
          <li>Warranty: <%= p.warranty %></li>
          <li>Color: <%= p.color.name if p.color %></li>
        </ul>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
